<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>CRAN, r-devel, GitHub, Travis CI, pruebas automáticas y todo eso - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CRAN, r-devel, GitHub, Travis CI, pruebas automáticas y todo eso" />
<meta property="og:description" content="Estoy harto. La gente de CRAN me devolvió (con errores) un paquete que trataba de subir. Había hecho el prescriptivo
R CMD check --as-cran etc.
y el log era una patena. Pero había un par de NOTES al pasar el test sobre la versión de desarrollo de R, r-devel. No solo hay que probar los paquetes en la versión que hay sino también en la que vendrá (tal y como está docuentado)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2015/12/17/cran-r-devel-github-travis-ci-pruebas-automaticas-y-todo-eso/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-17T08:13:13&#43;00:00" />
<meta property="article:modified_time" content="2015-12-17T08:13:13&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CRAN, r-devel, GitHub, Travis CI, pruebas automáticas y todo eso</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2015-12-17T08:13:13Z">2015-12-17</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/r/" rel="category">r</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>Estoy harto. La gente de CRAN me devolvió (con errores) un paquete que trataba de subir. Había hecho el prescriptivo</p>
<p><code>R CMD check --as-cran etc.</code></p>
<p>y el log era una patena. Pero había un par de <em>NOTES</em> al pasar el test sobre la versión de desarrollo de R, <code>r-devel</code>. No solo hay que probar los paquetes en la versión que hay sino también en la que vendrá (tal y como está docuentado).</p>
<p>Mis paquetes en desarrollo están en <a href="https://r-forge.r-project.org"><code>r-forge</code></a>. Hasta no hace tanto, <code>r-forge</code> corría <em>checks</em> en las dos versiones preceptivas de R, la actual y la de desarrollo. Pero desde hace un tiempo dejó de hacerlo en la segunda.</p>
<p>Debería haber instalado la versión futura de R (compilando, etc.) pero siempre me ha dado pereza. Así que me hice el listillo, crucé los dedos y me pasó lo que me pasó: sartenazo.</p>
<p>Como buen perezoso, perdí mucho más tiempo del que me habría costado instalar <code>r-devel</code> en buscar una alternativa. Y di con <a href="https://github.com/metacran/r-builder">esto</a>. La solución que ahí se propone pasa por lo siguiente:</p>
<pre><code>  1. Pasar el desarrollo de `r-forge` a GitHub.
  2. Darme de alta en [Travis CI](https://travis-ci.org). Travis CI es un servicio que automatiza las pruebas de código en GitHub: cada vez que se hace un _commit_, lanza una batería de pruebas (que hay que configurar de antemano, obviamente).
  3. Copiar dicha configuración de [aquí](https://github.com/metacran/r-builder).
</code></pre>
<p>En el último enlace se indican los detalles de la configuración pero los reitero, por referencia, aquí:</p>
<pre><code>  1. Una vez registrados en Travis CI, hay que pedirle que busque (o sincronice) tus proyectos en GitHub. Hay que marcar aquellos sobre los que se quieren realizar pruebas.
  2. Hay que copiar en el directorio raíz del paquete el fichero de configuración `.travis.yml`, esencialmente copiando el contenido de [este](https://github.com/metacran/r-builder/blob/master/sample.travis.yml) y adaptádolo si procede (en mi caso, ni eso).
  3. Hay que añadir al fichero `.Rbuildignore` en la raíz del paquete el fichero anterior, [como aquí](https://github.com/cjgb/MicroDatosEs/blob/master/.Rbuildignore).
  4. Adicionalmente, se le puede añadir al fichero `README.md` una imagen que indique si el test fue exitoso o no; las instrucciones están [aquí](https://docs.travis-ci.com/user/status-images/).
</code></pre>
<p>Con eso, después de cada <em>commit</em>, Travis CI hace su magia y ejecuta por su cuenta los <code>R CMD checks</code> en las dos versiones de interés de R.</p>
<p>Un único problema: solo prueba el paquete en Linux. Se puede forzar, creo, a que lo pruebe también donde la manzana a medio comer, pero no es mi guerra. Es un poco desafortunado, eso sí, que no lo haga sobre Windows. De hecho, tengo un paquete que corre estupendamente en Linux y falla estrepitosamente en lo de Microsoft&hellip; ¡y como no tengo acceso a ningún ordenador que corra eso!</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/cran/" rel="tag">cran</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/github/" rel="tag">github</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/travis/" rel="tag">travis</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2015/12/16/la-busqueda-de-la-causa-mas-probable-de-un-efecto/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">La búsqueda de la causa más probable de un efecto</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2015/12/18/la-respuesta-es-yo-no/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">La respuesta es: &#34;Yo no&#34;</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>