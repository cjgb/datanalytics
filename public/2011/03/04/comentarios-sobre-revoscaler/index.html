<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Nuevos comentarios sobre RevoScaleR - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nuevos comentarios sobre RevoScaleR" />
<meta property="og:description" content="El reto lanzado por Revolution Analytics a SAS está relacionado con el lanzamiento por parte de la primera empresa de un paquete, RevoScaleR, diseñado para permitir el análisis de conjuntos de datos grandes. La lectura más detallada de uno de los pocos documentos técnicos que circulan sobre el paquete me invita a compartir con mis lectores mis impresiones más allá de las primeras y más someras que realicé hace unos días." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2011/03/04/comentarios-sobre-revoscaler/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-03-04T09:38:29&#43;00:00" />
<meta property="article:modified_time" content="2011-03-04T09:38:29&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nuevos comentarios sobre RevoScaleR</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2011-03-04T09:38:29Z">2011-3-4</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/r/" rel="category">r</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>El <a href="http://www.datanalytics.com/blog/2011/02/07/%C2%BFun-torpedo-bajo-la-linea-de-flotacion-de-sas/">reto lanzado por Revolution Analytics a SAS</a> está relacionado con el lanzamiento por parte de la primera empresa de un paquete, <a href="http://www.revolutionanalytics.com/products/enterprise-big-data.php">RevoScaleR</a>, diseñado para permitir el análisis de conjuntos de datos <em>grandes</em>. La lectura más detallada de <a href="http://www.rochester.edu/College/psc/thestarlab/help/Big-Data-WP.pdf">uno de los pocos documentos técnicos que circulan sobre el paquete</a> me invita a compartir con mis lectores mis impresiones más allá de las primeras y más someras que realicé hace unos días.</p>
<p>La primera es que sigo sin entender claramente cómo es y cómo funciona el nuevo formato de almacenamiento de tablas, XDF. Al menos, no es público. Aunque es un tema de investigación candente (de lo que son prueba <a href="http://db.csail.mit.edu/chunkystore/">esto</a>, <a href="http://www.xdmf.org">esto</a>, <a href="http://www.hdfgroup.org/HDF5/whatishdf5.html">esto</a> o el mismo <a href="http://cran.r-project.org/web/packages/ff/">paquete ff de R</a>), no está claro si reaprovecha desarrollos previos o si es una implementación desde cero.</p>
<p>La segunda impresión es que el nuevo paquete utiliza una notación <em>muy SAS</em>:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">    <span style="color:#75715e"># Create function to transform data</span>
    myTransforms <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(data){
           data<span style="color:#f92672">$</span>Late    <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">$</span>ArrDelay <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">15</span>
           data<span style="color:#f92672">$</span>DepHour <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.integer</span>(data<span style="color:#f92672">$</span>CRSDepTime)
           data<span style="color:#f92672">$</span>Night   <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">$</span>DepHour <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span> <span style="color:#f92672">|</span> data<span style="color:#f92672">$</span>DepHour <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">5</span>
           <span style="color:#a6e22e">return</span>(data)
    }

    <span style="color:#75715e"># The rxDataStepXdf function read the existing data set, performs the</span>
    <span style="color:#75715e"># transformations, and creates a new data set.</span>
    <span style="color:#a6e22e">rxDataStepXdf</span>(outData<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ADS2&#34;</span>,
                  inData<span style="color:#f92672">=</span>dataName,
                  transformFunc<span style="color:#f92672">=</span>myTransforms,
                  varsToKeep<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;ArrDelay&#34;</span>,<span style="color:#e6db74">&#34;CRSDepTime&#34;</span>,<span style="color:#e6db74">&#34;DepTime&#34;</span>))

    <span style="color:#a6e22e">rxShowInfoXdf</span>(<span style="color:#e6db74">&#34;ADS2&#34;</span>, numRows<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>)
    <span style="color:#75715e"># Run a logistic regression using the new variables</span>
    logitObj <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">rxLogit</span>(Late<span style="color:#f92672">~</span>DepHour<span style="color:#f92672">+</span>Night, data<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ADS2&#34;</span>, verbose<span style="color:#f92672">=</span><span style="color:#66d9ef">TRUE</span>)</code></pre></td></tr></table>
</div>
</div>
<p>Pensé en un primer momento que podía ser intencional y buscando facilitar la migración de un sistema a otro. Luego, preguntándome a mí mismo qué tipo de interfaz hubiese usado yo para implementar algo parecido, no se me ocurrió nada radicalmente distinto: al tener la información en disco, los ficheros de datos se leen y se escriben: ya no se cargan en memoria. Por lo tanto, es necesario especificar fuentes y destinos de datos, qué transformaciones realizar sobre ellos, etc. Sin embargo, el nombre de la función <code>rxDataStepXdf()</code> sí resulta sumamente revelador.</p>
<p>La tercera, es que hay algo en los experimentos que describe el artículo que huele a chamusquina. Se trata de un análisis para comprobar el rendimiento del paquete a la hora de realizar una regresión sobre un conjunto de datos con 123M de filas y 29 columnas y que ocupa 13GB en disco. El estudio lo realizan con un portátil con 3GB de RAM (también con un servidor, pero eso no nos preocupa en esta entrada). Los tiempos que obtienen son:</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2011/03/revoscaler_benchmark.png"><img src="http://www.datanalytics.com/wp-uploads/2011/03/revoscaler_benchmark.png" alt="">
</a></p>
<p>¡Curioso! En la segunda y posteriores ejecuciones, el tiempo de proceso desciende a 4 segundos desde los casi 40 de la primera. ¿Motivo? Dizque las <em>cachés</em>. Y yo me pregunto, ¿cómo pueden <em>cachear</em> 13GB con 3GB de RAM? De ser por las <em>cachés</em>, la mejora en tiempos sólo podría explicarse si el fichero original ocupase menos de 3GB. ¿Será que los 13GB de fichero inicial realmente ocupan muchísimo menos (incluso menos de 3GB) en formato XDF? Porque tampoco es creíble que un portátil lea 13GB en 40 segundos. Ni mi portátil ni el de nadie. Según la Wikipedia, <a href="http://en.wikipedia.org/wiki/Hard_disk_drive#Data_transfer_rate">no cabe esperar velocidades de lectura superiores a 1000Mbits por segundo</a>; es decir, nunca más de 125MB por segundo. Únicamente leer 13GB a esta velocidad requeriría algo más de 100 segundos.</p>
<p>Al autor de esta entrada se le escapa algo de lo que cuenta el artículo.</p>
<p>Una última salvedad: sólo R (con el paquete RevoScaleR) puede leer y generar ficheros de tipo XDF. Entonces, ¿cómo generarlos? Porque si, por ejemplo, alguien te hace llegar un fichero de texto enorme, antes de poder cargarlo con R tienes que pasarlo a formato XDF. Pero para pasarlo a XDF tienes que haberlo cargado antes en R. Etc. De nuevo, ¿me pierdo algo?</p>
<p>¡Quién sabe si Revolution Analytics estará usando mi <a href="http://cran.r-project.org/web/packages/colbycol/index.html">paquete colbycol</a> (a propósito, ¿lo conocéis? ¿lo habéis probado?) para realizar la primera lectura!</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/sas/" rel="tag">sas</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/revoscaler/" rel="tag">revoscaler</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2011/03/03/casi-todos-los-resultados-cientificos-que-se-publican-son-falsos/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">¿Casi todos los resultados científicos que se publican son falsos?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2011/03/07/los-dinosaurios-y-r-dos-enlaces/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Los dinosaurios y R: dos enlaces</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>