<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Desarrollo de paquetes con R (II): primeros pasos - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Desarrollo de paquetes con R (II): primeros pasos" />
<meta property="og:description" content="La segunda entrada en mi serie sobre la creación de paquetes con R cubre los primeros pasos en la creación de uno. Bastan para tener una primera versión de un paquete en minutos. Pero antes, unos consejos generales:
 Usar algún tipo de sistema operativo basado en Unix: Linux, Mac OS, etc. o Cygwin en el peor de los casos. Tengo que confesar que yo comencé a usar Linux precisamente por este motivo: los procedimientos y herramientas que se utilizan para construir paquetes de R están influenciadas por la tradición Unix." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2011/06/30/desarrollo-de-paquetes-con-r-ii-primeros-pasos/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-06-30T07:36:54&#43;00:00" />
<meta property="article:modified_time" content="2011-06-30T07:36:54&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Desarrollo de paquetes con R (II): primeros pasos</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2011-06-30T07:36:54Z">2011-6-30</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/r/" rel="category">r</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>La segunda entrada en mi serie sobre la creación de paquetes con R cubre los primeros pasos en la creación de uno. Bastan para tener una primera versión de un paquete en minutos. Pero antes, unos consejos generales:</p>
<ol>
<li><strong>Usar algún tipo de sistema operativo basado en Unix:</strong> Linux, Mac OS, etc. o Cygwin en el peor de los casos. Tengo que confesar que yo comencé a usar Linux precisamente por este motivo: los procedimientos y herramientas que se utilizan para construir paquetes de R están influenciadas por la <em>tradición Unix</em>. Es cierto que se han creado herramientas para poder desarrollarlos desde Windows pero, después de haber trabajado en Linux, me parecen incómodas y antinaturales: pasar de Linux a Windows es como pasar del Ferrari al borriquillo.</li>
<li><strong>Registrar el proyecto en R-Forge</strong>, <a href="http://www.datanalytics.com/blog/2010/02/27/creando-paquetes-con-r-r-forge/">como ya hemos comentado previamente</a>. Dadas sus ventajas —siendo una de las principales permitir probar el paquete sobre varias plataformas distintas (Linux, Mac y Windows) automáticamente— sólo se me ocurre un motivo para no utilizarlo: como el código está públicamente disponible, no es válido para desarrollar aplicaciones cerradas y propietarias.</li>
<li>Utilizar <a href="http://www.datanalytics.com/blog/2011/06/13/minitutorial-de-subversion/">subversion</a> (o <a href="http://git-scm.com/">git</a>). Si el proyecto se aloja en R-Forge, subversion es la opción por defecto. Utilizar subversion permite gestionar mejor el desarrollo del paquete y facilita la colaboración entre los diversos autores.</li>
</ol>
<p>La manera en la que recomiendo comenzar a crear un paquete es partiendo de una serie de funciones ya desarrolladas previamente. Ni siquiera hace falta que estén terminadas ni que funcionen correctamente. Por ejemplo, podemos tener las dos funciones siguientes:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">foo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>( x ) <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> x
bar <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>( y ) <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> y</code></pre></td></tr></table>
</div>
</div>
<p>Si abrimos una nueva sesión de R —para que no haya funciones ni objetos adicionales en memoria (técnicamente, en el entorno global)— y cargamos esas funciones, podemos crear el _esqueleto _de nuestro paquete, al que llamaremos <code>mipaquete</code>, así:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R"><span style="color:#a6e22e">package.skeleton</span>( <span style="color:#e6db74">&#34;mipaquete&#34;</span> )</code></pre></td></tr></table>
</div>
</div>
<p>Ese comando crea en el directorio actual el directorio mipaquete con la estructura básica de un paquete: el fichero <code>DESCRIPTION </code>y los directorios <code>R </code>(con el código de las funciones) y <code>man </code>(con el esquema básico de los ficheros de ayuda). Pero, ¡cuidado, sólo puede utilizarse una vez! En lo sucesivo, al añadir funciones adicionales hay que crear el correspondiente fichero <code>.Rd</code> a mano.</p>
<p>A partir de ese momento, basta con ir completando los detalles: esencialmente, editar y completar los ficheros <code>DESCRIPTION </code>y los <code>.Rd</code> del directorio <code>man</code>. Para ello, es útil tener en cuenta los siguientes consejos:</p>
<ol>
<li>Crear cabeceras en los ficheros de código y, en general, seguir algún <a href="http://www.datanalytics.com/guia_estilo_r.html">criterio de estilo en el código</a> y añadir comentarios en los lugares adecuados.</li>
<li>Consultar el <a href="http://cran.r-project.org/doc/manuals/R-exts.pdf">documento de creación de extensiones de R</a> para los detalles concretos acerca de cómo debe completarse el fichero DESCRIPTION o qué secciones son necesarias en los ficheros .Rd.</li>
<li>Mantener la coherencia entre la definición de las funciones en su fichero <code>.R</code> y el correspondiente fichero de documentación <code>.Rd</code>: si no, será imposible crear el paquete porque R comprueba automáticamente que no existen discrepancias entre código y documentación.</li>
<li>Crear ejemplos en los ficheros <code>.Rd</code>: son muy útiles porque R comprueba que se ejecutan correctamente. Eso permite controlar que todo funciona correctamente de una manera automática.</li>
</ol>
<p>El objetivo de esta fase es que el paquete pase un <em>check</em>. En un <em>check</em>, R comprueba la coherencia entre código y documentación, que los ejemplos puedan ejecutarse correctamente, que no faltan campos esenciales en los paquetes, etc. Pero de cómo realizar este check nos ocuparemos en la siguiente entrega de la serie.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/paquetes/" rel="tag">paquetes</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/programaci%C3%B3n/" rel="tag">programación</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2011/06/29/visualizacion-de-datos-con-weave/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">Visualización de datos con Weave</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2011/07/01/paquetes-huerfanos-de-r/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Paquetes huérfanos de R</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>