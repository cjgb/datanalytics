<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Todo sobre bitcoin (y por qué he decidido cogerle manía) - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Todo sobre bitcoin (y por qué he decidido cogerle manía)" />
<meta property="og:description" content="Esencialmente, un usuario de bitcoin puede hacer las mismas operaciones que un cliente bancario: ver su saldo, recibir bitcoins, transferir bitcoins. En ese aspecto, nada nuevo bajo el sol. Lo particular del caso es que, a diferencia del sistema bancario, sumamente centralizado, en el mundo del bitcoin operan multitud de agentes sin necesidad de una autoridad central.
En lo siguiente, al hablar del sistema, me estaré refiriendo a una red de computadoras que corren un software protocolizado (este protocolo es la ley, i." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2017/11/08/todo-sobre-bitcoin-y-por-que-he-decidido-cogerle-mania/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-11-08T08:13:09&#43;00:00" />
<meta property="article:modified_time" content="2017-11-08T08:13:09&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Todo sobre bitcoin (y por qué he decidido cogerle manía)</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2017-11-08T08:13:09Z">2017-11-8</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/varios/" rel="category">varios</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>Esencialmente, un usuario de <em>bitcoin</em> puede hacer las mismas operaciones que un cliente bancario: ver su saldo, recibir <em>bitcoins</em>, transferir <em>bitcoins</em>. En ese aspecto, nada nuevo bajo el sol. Lo particular del caso es que, a diferencia del sistema bancario, sumamente centralizado, en el mundo del <em>bitcoin</em> operan multitud de agentes sin necesidad de una autoridad central.</p>
<p>En lo siguiente, al hablar del <em>sistema</em>, me estaré refiriendo a una red de computadoras que corren un <em>software</em> protocolizado (este protocolo es la <em>ley</em>, i.e., el conjunto de reglas, que rige <em>bitcoin</em>). Cualquier computadora conectada a internet y con el <em>software</em> adecuado puede sumarse al <em>sistema</em> si necesidad de otra certificación.</p>
<p>Los <em>bitcoins</em> del monedero de un usuario han nacido en algún momento y lugar (luego veremos cómo). Es posible trazar la ruta completa que realizaron desde que se originaron: está escrita en un <em>libro</em>. Ese libro <a href="https://www.statista.com/statistics/647523/worldwide-bitcoin-blockchain-size/">ocupa actualmente unos 150GB</a>. Si te interesa no te será difícil encontrar la manera de descargarlo.</p>
<p>Este libro está compuesto de bloques de 1MB de tamaño (aunque verás que hay discusiones sobre la posibilidad de incrementarlo). Cada bloque contiene unas 1000 transacciones. El sistema está diseñado, como veremos, para que se genere un nuevo bloque cada 10 minutos.</p>
<p>(¿Cuál es el número máximo de transacciones por hora que admite Bitcoin? ¿Cómo se compara con el de operaciones en bolsa, transacciones de tarjeta de crédito, etc.?)</p>
<p>Puedes ver los últimos bloques generados <a href="https://blockchain.info/blocks">aquí</a>. Esa página indica su número de orden dentro del libro (o <em>altura</em>), a qué hora se generó, quién lo generó (más sobre eso después), su tamaño y su <em>hash</em>. Si accedes a la página de uno de los bloques, verás las transacciones que contiene además de una serie de datos adicionales sobre los que volveremos.</p>
<p>Los usuarios de <em>bitcoin</em> envían transacciones al sistema que quedan en un limbo antes de ser confirmadas, i.e., escritas en el <em>libro</em>. Se pueden consultar el <em>stream</em> de transacciones que llegan al sistema y el número de las pendientes de confirmación en, p.e., <a href="https://blockchain.info/unconfirmed-transactions">aquí</a>, una página que será del agrado de los estudiosos de la teoría de colas.</p>
<p>Los <em>mineros</em> se encargan de crear nuevos bloques. Los mineros tienen un incentivo natural y primario del que derivan otros: ganar dinero. Originariamente, en forma de <em>bitcoins</em>, claro. Así que tienen muy claro que no tienen ningún interés en subvertir el sistema. En particular, no tienen ningún interés en dar por buena ninguna transacción inválida (p.e., que alguien transfiera un <em>bitcoin</em> que no posee); mucho menos, en dar por buena una transacción inválida que pueda haber sido introducida subrepticia y dolosamente por otros mineros.</p>
<p>Es importante subrayar el asunto de los incentivos, que es en el fondo lo que hace que todo funcione correctamente. Por muy egoístas y malintencionados que sean los mineros, está en su interés seguir las reglas. Son una suerte de mano invisible, esa de la que algunos conomistas predican extravagantemente que es invisible simplemente porque no existe. Tal vez debieran reconsiderar su postura ante el evidente contraejemplo sintético que constituye el <em>bitcoin</em>. En todo caso, el tramposo pierde tiempo y dinero; su pecado se convierte en su misma penitencia. Luego veremos ejemplos.</p>
<p>A la vista del libro <em>actual</em> y de las transacciones pendientes de registrar, los distintos mineros se lanzan a una carrera para construir el siguiente bloque. Su incentivo consiste en:</p>
<pre><code>  1. Empaquetar el mayor número posible de transacciones pendientes dentro del límite máximo de 1MB.
  2. Utilizar solo transacciones válidas (o el bloque sería rechazado).
  3. Priorizar aquellas transacciones que proporcionen mayores comisiones. En efecto, al realizar una transferencia, los usuarios sugieren una comisión para inducir a los mineros a tenerla en cuenta: a mayor comisión, mayor probabilidad de inclusión en el siguiente bloque.
  4. Capturar un premio de 12.5 _bitcoins_ que el minero puede anotarse como recompensa por los servicios prestados. (Nota: actualmente son 12.5 _bitcoins_; antes fueron más y llegará un momento en que serán menos. La recompensa [se reduce a la mitad cada cierto número de ciclos](http://www.bitcoinblockhalf.com/) de manera que el número final de _bitcoins_ en circulación nunca exceda los 21 millones).
</code></pre>
<p>En dinero contante y sonante, sumando la compensación y las comisiones, el premio por publicar exitosamente un bloque es actualmente, con el <em>bitcoin</em> en la órbita de los 7000 dólares, de unos cien mil euros.</p>
<p>Pero las condiciones anteriores, por sí solas, no bastan. En apenas unos milisegundos, miles de mineros de todo el mundo propondrían sus propios bloques y el sistema se colapsaría. Para evitarlo contempla un mecanismo muy ingenioso de gestión de la concurrencia.</p>
<p>Pero el problema de la concurrencia es un viejo conocido en el mundo de la informática y existen varias técnicas para gestionarlo: cerrojos, semáforos, etc. <em>Bitcoin</em> implementa una similar a la que (y describo de memoria) utiliza <em>ethernet</em>. Cuando en <em>ethernet</em> se producen interferencias porque dos tarjetas utilizan el canal simultáneamente, el protocolo establece que ambas tienen que abstenerse de emitir durante un periodo aleatorio de tiempo. Así hay una alta probabilidad de que cuando venza el plazo de la tarjeta a la que le correspondió el más breve, encuentre el cable expedito.</p>
<p>En el caso de <em>bitcoin</em>, los mineros se obligan a solo aceptar un bloque cuando exista prueba fehaciente de que permanecido congelado durante un tiempo aleatorio. Este tiempo aleatorio no puede ser asignado por una (inexistente) autoridad central; obviamente, los nodos tampoco pueden autoasignarse un tiempo de espera aleatorio porque, a diferencia de las tarjetas de <em>ethernet</em> que, se supone, cooperan, juegan en bandos enfrentados, i.e., compiten, y tienen todo el incentivo del mundo para que su espera sea, oh casualidad, siempre cero.</p>
<p>Para obligar a esperar a los nodos, estos reciben problema computacional cuyo tiempo de resolución es aleatorio. El primero en resolverlo publicará su bloque y la solución para dejar constancia de juego limpio. El resto, una vez validado, se lamerá las heridas, desistirá en su empeño, lo considerará añadido al <em>libro</em> y probará fortuna con el siguiente bloque.</p>
<p>El problema en cuestión, en forma simplificada, consiste en encontrar una solución para la desigualdad</p>
<p>$latex f(B_{n-1}, B_n, N) &lt; d$</p>
<p>donde:</p>
<pre><code>  * $latex f$ es una función positiva que involucra _hashes_ (estilo [SHA-256](https://es.wikipedia.org/wiki/SHA-2)) de sus argumentos. De hecho, es un _hash_ de sumas de los _hashes_ de sus argumentos. Así que la manera más simple de describir el problema anterior vendría a ser algo así como _encontrar un valor cuyo hash sea menor que cierto valor dado_. O, incluso, sacrificando la precisión en aras de la concisión, _invertir un hash_.
  * $latex B_n$ es el candidato a bloque $latex n$-ésimo que se busca proponer de acuerdo con las condiciones indicadas más arriba.
  * $latex B_{n-1}$ es el bloque anterior. Esto es importante por un motivo y fundamental por otro. Importante porque impone la secuencialidad en el libro, i.e., impide que se ramifique. Pero es fundamental porque es la clave del _consenso_ del sistema. La forma positiva que tiene el acto de aceptación de un bloque es, precisamente, que una mayoría de los mineros lo incorporan a sus cálculos. Un minero mohicano podría empeñarse en seguir minandon una cadena ajena al consenso, pero sería ignorado por el resto y los _bitcoins_ que se asignase en su empeño solipsista valdrían solo para su autocontemplación.
  * $latex N$ es un número, conocido en la jerga como el _nonce_, que puede ser elegido libremente por el minero.
  * $latex d$, la _dificultad_, es un parámetro especificado por el sistema que gradúa la complejidad del problema para [mantener estable el tiempo de búsqueda](https://en.bitcoin.it/wiki/Difficulty) independientemente de la capacidad de cálculo del sistema. Obviamente, a menor $latex d$, mayor complejidad.
</code></pre>
<p>Y eso es esencialmente todo en una primera aproximación. No obstante, quiero añadir la respuesta que he encontrado a algunas preguntas razonables que me surgieron mientras leía sobre el asunto y cuya discusión más arriba habrían roto el hilo del discurso.</p>
<p><strong>¿Es matemáticamente posible encontrar siempre una solución al problema de los <em>hashes</em>?</strong></p>
<p>No neceariamente. Aventuraría que no. Desde luego, fijados $latex B_{n-1}$ y $latex B_n$ en la expresión $latex f(B_{n-1}, B_n, N)$ no porque $latex N$ tiene 4 bytes (un detalle no indicado antes) y el conjunto de imágenes es pequeño. De hecho, los mayores mineros, con una capacidad global de decenas de TH/s (_terahashes_), pueden explorar hoy en día, para $latex B_{n-1}$ y $latex B_n$ fijos todos los valores $latex f(B_{n-1}, B_n, N))$ en menos de un segundo. El hecho de que sigan tardando alrededor de diez minutos significa que se ven obligados a modificar el bloque candidato $latex B_n$ bastantes veces.</p>
<p><strong>¿Puede haber todavía problemas de concurrencia?</strong></p>
<p>Sí, y de hecho, los hay. En ocasiones se publican <a href="https://blockchain.info/es/orphaned-blocks">dos bloques válidos casi simultáneamente</a>. Pero el interés por el consenso hace que el sistema se decante rápidamente por uno de los dos y el otro quede <em>huérfano</em>. Recuérdese que los mineros tienen incentivo para mantener una única <em>libro</em>.</p>
<p><strong>¿Puede atacarse o <em>crackearse</em> _bitcoin?</strong></p>
<p>Busca en internet y verás una lista de posibles ataques (p.e., <a href="https://btc-hijack.ethz.ch/">esta</a>), desde los de denegación de servicio hasta los que intentan introducir transacciones espurias. El menos preocupante de todos parece ser el del 51%, i.e., que un mismo minero controle la mayor parte de la capacidad de cálculo, con la intención de sabotearlo. Por razones puramente económicas, además: destruiría el valor del <em>bitcoin</em>, pasaría a controlar un sistema de valor exactamente cero.</p>
<p><strong>¿Quiénes son los mineros?</strong></p>
<p>Cualquiera puede minar <em>bitcoins</em>. Sin embargo, debido a la enorme capacidad de cálculo necesaria para garantizar una mínima probabilidad de éxito, los mayores actores del mercado y los que <a href="https://blockchain.info/pools">efectivamente se lo reparten</a>, son los llamados <em>pools</em>. Los <em>pools</em> sindican la capacidad de cálculo de actores individuales, trocean la carga computacional y reparten las ganancias obtenidas entre los participantes.</p>
<p><strong>¿Cómo es una mina de <em>bitcoins</em>?</strong></p>
<p>Supongo que no todas son así, pero merece la pena leer <a href="https://qz.com/1054805/what-its-like-working-at-a-sprawling-bitcoin-mine-in-inner-mongolia/">esto</a>.</p>
<p>Increíble lugar… pero eso consume mucha energía, ¿verdad?</p>
<p>Y que lo digas. <em>Bitcoin</em> produce una recompensa de unos cien mil euros cada 10 minutos. Para lograrla, los participantes del mercado queman la electricidad equivalente a <a href="https://cryptovest.com/news/bitcoin-mining-is-burning-enough-electricity-to-power-nigeria/">la que produce un país como Nigeria</a>.</p>
<p>Justo por eso he decidido cogerle manía.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/bitcoin/" rel="tag">bitcoin</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/criptomonedas/" rel="tag">criptomonedas</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2017/11/07/intervalos-de-confianza-con-forma-de-rosquilla/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">&#34;Intervalos&#34; de confianza con forma de rosquilla</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2017/11/09/probabilismo-probabilorismo-y-todas-esas-cosas/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Probabilismo, probabilorismo y todas esas cosas</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>