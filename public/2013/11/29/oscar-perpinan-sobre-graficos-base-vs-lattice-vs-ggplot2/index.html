<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Óscar Perpiñán sobre gráficos base vs. lattice vs ggplot2 - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Óscar Perpiñán sobre gráficos base vs. lattice vs ggplot2" />
<meta property="og:description" content="Óscar Perpiñán es alguien a quien tenéis que conocer necesariamente si os interesan, entre otras cosas, temas como la visualización de datos espaciotemporales. Y tiene un blog muy recomendable.
Recientemente me ha dado permiso para reproducir aquí una respuesta suya en un hilo planteado en r-help-es sobre los distintos mecanismos existentes en R para generar gráficos. Lo hago a continuación con mínimos retoques tipográficos:
La ventaja esencial de los gráficos grid (lattice y ggplot2) frente a los gráficos base es su mayor flexibilidad para añadir o modificar el contenido." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2013/11/29/oscar-perpinan-sobre-graficos-base-vs-lattice-vs-ggplot2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-11-29T06:58:02&#43;00:00" />
<meta property="article:modified_time" content="2013-11-29T06:58:02&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Óscar Perpiñán sobre gráficos base vs. lattice vs ggplot2</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2013-11-29T06:58:02Z">2013-11-29</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/gr%C3%A1ficos/" rel="category">gráficos</a>, <a class="meta__link" href="/categories/r/" rel="category">r</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>Óscar Perpiñán es alguien a quien tenéis que conocer necesariamente si os interesan, entre otras cosas, temas como la <a href="http://oscarperpinan.github.io/spacetime-vis/">visualización de datos espaciotemporales</a>. Y tiene un <a href="http://procomun.wordpress.com/">blog muy recomendable</a>.</p>
<p>Recientemente me ha dado permiso para reproducir aquí una respuesta suya en un hilo planteado en <a href="https://stat.ethz.ch/mailman/listinfo/r-help-es">r-help-es</a> sobre los distintos mecanismos existentes en R para generar gráficos. Lo hago a continuación con mínimos retoques tipográficos:</p>
<p>La ventaja esencial de los gráficos <em>grid</em> (<code>lattice</code> y <code>ggplot2</code>) frente a los gráficos <em>base</em> es su mayor flexibilidad para añadir o modificar el contenido. Un gráfico <em>grid</em> es un objeto más en R y, como tal, puede ser manipulado con los métodos que cada paquete define. Existen dos librerías fundamentales en el mundo <em>grid</em>, <code>lattice</code> y <code>ggplot2</code>.</p>
<p><code>lattice</code> es una implementación de los gráficos Trellis propuestos por Cleveland y otros (una matriz rectangular de paneles). Usa una interfaz basada en las fórmulas de R para especificar la relación entre las variables que componen el gráfico. Por ejemplo, <code>y ~ x | g1 * g2 </code>representa la variable <code>y</code> frente a <code>x</code> condicionada a las variables <code>g1 </code>y <code>g2</code>. Cada combinación de estas variables <code>g1</code> y <code>g2</code> determina un subconjunto de <code>x</code> e <code>y</code>, y por tanto el contenido de cada panel de la matriz del gráfico Trellis. Por ejemplo, el siguiente código representa la variable <code>wt</code> frente a <code>mpg</code> usando los niveles de la variable <code>cyl</code> para controlar el color y la variable <code>am</code> para definir
los paneles:</p>
<p><code>xyplot(wt ~ mpg | am, data = mtcars, groups = cyl)</code></p>
<p>En cierto sentido, este enfoque puede ser algo rígido para algunos gráficos, sobre todo cuando se necesita superponer capas diferentes en un mismo panel con datos que provienen de contenedores diferentes. Aquí merece la pena destacar el paquete <code>latticeExtra</code>. Con él es posible definir capas (<em>layer</em>) y superponer objetos trellis completos o capas con la función <code>+.trellis</code> con mucha flexibilidad.</p>
<p><code>ggplot2</code> es una implementación de &ldquo;La gramática de los gráficos&rdquo; propuesta por Wilkinson en 1999. Este esquema divide un gráfico en componentes tales como escalas y capas. Por tanto, la definición de un gráfico con este enfoque se realiza combinando varias funciones que proporcionan la definición de cada componente implicado. Normalmente un gráfico se construye de forma incremental a partir de la función <code>ggplot</code> usando el operador <code>+</code> para añadir capas al objeto definido con <code>ggplot</code>. Por ejemplo, para representar el mismo gráfico anterior (la variable <code>wt</code> frente a <code>mpg</code> usando los niveles de la variable <code>cyl </code>para controlar el color y la variable <code>am</code> para definir los paneles) se usa este código:</p>
<p><code>ggplot(mtcars, aes(mpg, wt)) + geom_point(aes(colour=factor(cyl))) + facet_grid(. ~ am)</code></p>
<p>Como decía, la elección entre <code>lattice</code> o <code>ggplot2</code> depende de los gustos de cada uno para un rango muy amplio de aplicaciones. No me refiero a los gustos estéticos sino de manejo (fórmula frente a definición incremental). En general, salvo detalles muy específicos y de uso poco frecuente, sabiendo usar adecuadamente los recursos que cada paquete ofrece, los resultados gráficos son prácticamente idénticos y con la misma calidad estética.</p>
<p>Las dos únicas diferencias relevantes que he encontrado son (específicas de mi trabajo particular con R):</p>
<pre><code>  * Muchos paquetes definen métodos para gráficos _base_ y `lattice`, pero con menor frecuencia y sofisticación para `ggplot2`. En esos casos esto obliga a elaborar código propio y usar funciones auxiliares (`fortify`) para transformar clases de ese paquete en `data.frame `convencionales antes de usar `ggplot`.
  * En su implementación actual, `ggplot2` es sustancialmente más lento para generar gráficos con contenedores de datos **muy** grandes. Esto es destacable en el caso de datos espaciales y, sobre todo, cuando hay que realizar el paso de conversión mencionado en el punto anterior.
</code></pre>
<p>Termino: hay una serie de artículos (algo antiguos pero igualmente ilustrativos) que comparan código y resultados (sin optimizar) de <code>lattice</code> y <code>ggplot2</code> para una variedad amplia de gráficos (<a href="http://learnr.wordpress.com/2009/06/28/ggplot2-version-of-figures-in-lattice-multivariate-data-visualization-with-r-part-1/">ejemplo</a>).</p>
<p>En la variedad está el gusto :-)</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/ggplot2/" rel="tag">ggplot2</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/gr%C3%A1ficos/" rel="tag">gráficos</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/lattice/" rel="tag">lattice</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/trellis/" rel="tag">trellis</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2013/11/28/donde-van-los-ejes/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">¿Dónde van los ejes?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2013/12/02/requisitos-para-mi-taller-de-hadoop-r-en-las-v-jornadas-de-usuarios-de-r/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Requisitos para mi taller de Hadoop &#43; R en las V Jornadas de Usuarios de R</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>