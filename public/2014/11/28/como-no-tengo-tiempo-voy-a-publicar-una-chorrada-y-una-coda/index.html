<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Como no tengo tiempo, voy a publicar una chorrada (y una coda) - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Como no tengo tiempo, voy a publicar una chorrada (y una coda)" />
<meta property="og:description" content="Como no tengo tiempo, voy a publicar una chorrada. Voy a coger unos datos que encuentre por ahí, voy a tomar alguna variable, voy a pintarla (en un mapa, si puede ser) y luego voy a construir una narrativa. Espero que no os deis cuenta y me lo creáis todo.
Comienzo.
Los datos del World Values Survey (aquí podéis obtenerlos) son mú importantes y mú guays. De todas las variables que contiene, voy a extraer una, la variable mú importante (VMI)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2014/11/28/como-no-tengo-tiempo-voy-a-publicar-una-chorrada-y-una-coda/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-11-28T07:13:31&#43;00:00" />
<meta property="article:modified_time" content="2014-11-28T07:13:31&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Como no tengo tiempo, voy a publicar una chorrada (y una coda)</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2014-11-28T07:13:31Z">2014-11-28</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/estad%C3%ADstica/" rel="category">estadística</a>, <a class="meta__link" href="/categories/n%C3%BAmeros/" rel="category">números</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>Como no tengo tiempo, voy a publicar una chorrada. Voy a coger unos datos que encuentre por ahí, voy a tomar alguna variable, voy a pintarla (en un mapa, si puede ser) y luego voy a construir una narrativa. Espero que no os deis cuenta y me lo creáis todo.</p>
<p>Comienzo.</p>
<p>Los datos del <a href="http://www.worldvaluessurvey.org/">World Values Survey</a> (<a href="http://www.worldvaluessurvey.org/WVSOnline.jsp">aquí</a> podéis obtenerlos) son <em>mú</em> importantes y <em>mú</em> guays. De todas las variables que contiene, voy a extraer una, la variable <em>mú</em> importante (VMI).</p>
<p>La VMI es muy importante, como su nombre bien indica. Se ha usado en la mar de estudios, publicados y no, en las más diversas disciplinas. Me interesa hoy conocer su distribución en función de, por ejemplo, la comunidad autónoma en España. Así es:</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2014/11/distribucion_vmi.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/distribucion_vmi.png" alt="distribucion_vmi">
</a></p>
<p>Verse puede cómo varía enormemente. En unas comunidades autónomas la barra es más alta, p.e., en la C15; en otras, más baja. Es muy baja en la C17, pero, ¿qué se puede esperar de la gente de la C17? ¡Si son todos de pueblo! Y no ni he ido ni quiero ir a la C17 jamás. ¿Para qué? Si despuntan en algo es en la variable mú importante&hellip; y para lo malo. Que yo sepa nunca salió de allá nada de provecho. Luego hay otras comunidades autónomas que están <em>in medio</em>, donde <em>stat virtus</em>. Ya lo decía Sancho Panza: tanto se pierde por carta de más como por carta de menos. Entre ellas se cuentan la próspera C06 y la C01. A pesar de que los de la C01 son un poco raritos, que conste.</p>
<p>Etc.</p>
<p>Y mañana más.</p>
<h3 id="coda">Coda</h3>
<p>Obviamente, estoy de coña. Yo nunca escribiría algo así. Para eso, hago lo de ayer y me planto. Pero hay gente con menos vergüenza que la mía. Por ejemplo, la autora de <a href="http://nadaesgratis.es/?p=39019">esto</a>.</p>
<p>Pinta ella cosas del tipo</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2014/11/Map1_confianza_generalizada.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/Map1_confianza_generalizada.png" alt="Map1_confianza_generalizada">
</a></p>
<p>que viene a ser una versión de mi gráfico de barras (¿os habéis fijado que, adrede, las barras no principian donde deben, en 0? ¡lo que me ha costado construirlo!) un poquito más elaborada —hay gente que tiene más tiempo que yo— y que tiene sobre el mío la ventaja de que nos recuerda la forma de Extremadura. Por lo demás, tanto el gráfico y las cifras que representa, como la inanidad de la narrativa que lo rodean en la publicación original son idénticos al mío.</p>
<p>¿Veis las diferencias tan notables que muestra el mapa anterior? ¿Serán <em>significativas</em>? Volveré a eso luego, pero quiero indicar primero que las variaciones en mi gráfico son espurias. La VMI que he representado es&hellip; la proporción de mujeres. Que varía mucho menos entre comunidades autónomas (INE dixit):</p>
<pre><code>floor(&lt;a href=&quot;http://inside-r.org/r-doc/stats/fivenum&quot;&gt;fivenum(sexos$prop) * 10000) / 100
#[1] 49.65 50.24 50.49 51.07 52.10
</code></pre>
<p>Si con una variable conocida podemos detectar una varianza tan grande, ¿de verdad podemos fiarnos de los resultados que afectan a otras desconocidas? ¿No estaremos <a href="http://xkcd.com/904/">creando narrativas alrededor de ruido estadístico</a>?</p>
<p>El problema es consencuencia, en parte, del minúsculo tamaño muestral. Véase el número de encuestas por comunidad autónoma:</p>
<pre><code>sort(table(vmi$ccaa))
#c17 c06 c15 c04 c11 c02 c14 c03 c07 c05 c16 c08 c12 c10 c13 c09 c01
#  9  16  16  24  26  33  35  40  42  54  67  69  69 141 159 181 208
</code></pre>
<p>Después de lo cual, ahora más constructivamente, regreso al párrafo con el que la autora acompañaba el gráfico anterior,</p>
<!-- raw HTML omitted -->
<p>y voy a ensayar un análisis utilizando técnicas de esas que<!-- raw HTML omitted -->, se conoce, no se enseñan en econometría<!-- raw HTML omitted --> <a href="http://www.stat.wisc.edu/~larget/Stat998/Fall2013/GelmanMultipleComparisons.pdf">nos enseñan quienes saben del asunto</a>.</p>
<p>Inspirado por el artículo anterior, hago</p>
<pre><code>library(&lt;a href=&quot;http://inside-r.org/packages/cran/lme4&quot;&gt;lme4)
library(&lt;a href=&quot;http://inside-r.org/packages/cran/lattice&quot;&gt;lattice)

# los datos están disponibles
# en http://www.worldvaluessurvey.org/
load(&quot;WorldValuesSurvey-Wave6-2010-2014_v2014-11-07.rdata&quot;)

wvs.all &lt;- get(&quot;WorldValuesSurvey-Wave6-2010-2014_v2014-11-07&quot;)
spain &lt;- wvs.all[wvs.all$V2 == 724,]

tmp &lt;- spain[,c(&quot;V256&quot;, &quot;V240&quot;, &quot;V242&quot;, &quot;V24&quot;)]
colnames(tmp) &lt;- c(&quot;ccaa&quot;, &quot;sex&quot;, &quot;age&quot;, &quot;trust&quot;)

tmp &lt;- tmp[tmp$trust &gt; 0,]
tmp$ccaa &lt;- gsub(&quot;7240&quot;, &quot;c&quot;, as.character(tmp$ccaa))

tmp$sex &lt;- factor(tmp$sex)

mod3 &lt;- lmer(&lt;a href=&quot;http://inside-r.org/packages/cran/trust&quot;&gt;trust ~ 1 + (1 | ccaa), data = tmp)
&lt;a href=&quot;http://inside-r.org/r-doc/lattice/dotplot&quot;&gt;dotplot(&lt;a href=&quot;http://inside-r.org/r-doc/nlme/ranef&quot;&gt;ranef(mod3, condVar = TRUE))
&lt;a href=&quot;http://inside-r.org/r-doc/lattice/qqmath&quot;&gt;qqmath(&lt;a href=&quot;http://inside-r.org/r-doc/nlme/ranef&quot;&gt;ranef(mod3, condVar = TRUE))
</code></pre>
<p>para obtener</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2014/11/trust_dotplot.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/trust_dotplot.png" alt="trust_dotplot">
</a>
y
<a href="http://www.datanalytics.com/wp-uploads/2014/11/trust_qqmath.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/trust_qqmath.png" alt="trust_qqmath">
</a></p>
<p>que nos indican que solo habría dos o tres comunidades en las que las diferencias en la variable confianza son realmente distintas de la media. Siendo la más extrema Navarra, en la que la diferencia (por eso el coeficiente tiene más variabilidad) está basada en apenas 15 encuestas.</p>
<p>Aunque bien podría argumentarse que lo que piden los datos es un modelo basado en <code>glmer</code>,</p>
<pre><code>tmp$trust.bin &lt;- tmp$trust == 1

mod.glmer &lt;- glmer(trust.bin ~ 1 + (1 | ccaa),
                   &lt;a href=&quot;http://inside-r.org/r-doc/stats/family&quot;&gt;family = &lt;a href=&quot;http://inside-r.org/r-doc/stats/binomial&quot;&gt;binomial, data = tmp)
&lt;a href=&quot;http://inside-r.org/r-doc/lattice/dotplot&quot;&gt;dotplot(&lt;a href=&quot;http://inside-r.org/r-doc/nlme/ranef&quot;&gt;ranef(mod.glmer, condVar = TRUE))
&lt;a href=&quot;http://inside-r.org/r-doc/lattice/qqmath&quot;&gt;qqmath(&lt;a href=&quot;http://inside-r.org/r-doc/nlme/ranef&quot;&gt;ranef(mod.glmer, condVar = TRUE))
</code></pre>
<p>y obtener así</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2014/11/trust_glmer_dotplot.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/trust_glmer_dotplot.png" alt="trust_glmer_dotplot">
</a></p>
<p>y</p>
<p><a href="http://www.datanalytics.com/wp-uploads/2014/11/trust_glmer_qqmath.png"><img src="http://www.datanalytics.com/wp-uploads/2014/11/trust_glmer_qqmath.png" alt="trust_glmer_qqmath">
</a></p>
<p>que vuelven a revelar que gran parte de lo que la autora afirma sobre la confianza es la verbalización de un zumbido browniano.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/confianza/" rel="tag">confianza</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/estad%C3%ADstica/" rel="tag">estadística</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/glmer/" rel="tag">glmer</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/lme4/" rel="tag">lme4</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/lmer/" rel="tag">lmer</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/mapas/" rel="tag">mapas</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2014/11/26/dualidad-en-la-practica-lecciones-de-la-guerra-fria/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">Dualidad en la práctica: lecciones de la guerra fría</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2014/12/01/graficos-e-interactividad-una-ocasion-desaprovechada/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Gráficos e interactividad: una ocasión desaprovechada</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>