<!DOCTYPE html>
<html class="no-js" lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>P-valores y decisiones - datanalytics</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="P-valores y decisiones" />
<meta property="og:description" content="Los números de esta entrada son reales aunque disfrazados: proceden de un proyecto real. Para medir la efectividad de una serie de modelos que hemos creado en Circiter, hemos pedido al cliente lo de siempre: que parta la lista de sujetos en dos al azar para después poder medir los éxitos y fracasos usando dos procedimientos distintos.
Pero como tenemos dudas acerca del proceso de partición —que no controlamos nosotros— hemos medido el número de éxitos y fracasos en cada uno de los grupos en una prueba previa." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2019/12/04/p-valores-y-decisiones/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-04T09:13:00&#43;00:00" />
<meta property="article:modified_time" content="2019-12-04T09:13:00&#43;00:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="datanalytics" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">datanalytics</div>
					<div class="logo__tagline">Estadística y análisis de datos</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">P-valores y decisiones</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2019-12-04T09:13:00Z">2019-12-4</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/consultor%C3%ADa/" rel="category">consultoría</a>, <a class="meta__link" href="/categories/estad%C3%ADstica/" rel="category">estadística</a>, <a class="meta__link" href="/categories/r/" rel="category">r</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>Los números de esta entrada son reales aunque disfrazados: proceden de un proyecto real. Para medir la efectividad de una serie de modelos que hemos creado en <a href="http://www.circiter.es">Circiter</a>, hemos pedido al cliente lo de siempre: que parta la lista de sujetos en dos <em>al azar</em> para después poder medir los éxitos y fracasos usando dos procedimientos distintos.</p>
<p>Pero como tenemos dudas acerca del proceso de partición —que no controlamos nosotros— hemos medido el número de éxitos y fracasos en cada uno de los grupos en una prueba previa. Esperábamos que las proporciones fuesen <em>similares</em> en ambos grupos y hemos obtenido esto:</p>
<ul>
<li>Grupo A: 119072 éxitos en 363523 sujetos  (32.75%)  * Grupo B: 118713 éxitos en 372664 sujetos (31.85%)</li>
</ul>
<p>Parece compensado, pero, ¿qué nos dice la estadística frecuentista de toda la vida? Ejecutando</p>
<pre><code>n1 &lt;- 363523
n2 &lt;- 372664
op1 &lt;- 119072
op2 &lt;- 118713

v1 &lt;- rep(0, n1)
v1[1:op1] &lt;- 1
v2 &lt;- rep(0, n2)
v2[1:op2] &lt;- 1

my_v &lt;- c(v1, v2)

res &lt;- replicate(1000, {
  tmp &lt;- sample(my_v, length(my_v))
  prop1 &lt;- mean(head(tmp, n1))
  prop2 &lt;- mean(tail(tmp, n2))
  prop1 / prop2
})
</code></pre>
<p>obtenemos una aproximación al p-valor de 0, cero redondo.</p>
<p>Y ahora, la decisión.</p>
<p>Lo que acabamos de calcular es la probabilidad de obtener una desproporción como la que muestran los datos suponiendo que la partición sea perfectamente aleatoria. Pero sabemos poco acerca de la recíproca: la probabilidad de que la partición sea perfectamente aleatoria a la vista de la obtenida.</p>
<p>Podría pasar lo siguiente. Que tuviésemos delante el código con el que se ha realizado la partición y pareciese <em>bueno</em>. Podríamos en tal caso pensar que, vale, estamos <em>casi seguros</em> de tener el algoritmo correcto aunque, tal vez, con  algún <em>bug</em>. Pero, por otra parte, aunque hayamos obtenido un p-valor de 0/1k, el <em>verdadero</em>, tal vez sea de de 1/10k y pudiera, pudiera ser que nos hubiese tocado la china. ¿Y si hay 10k <em>Circiters</em> haciendo lo mismo en estos días por el mundo y resulta que de todos ellos, solo a nosotros nos ha salido una partición así de anómala?</p>
<p>Sin embargo, no hemos visto el código con el que se ha realizado la partición. Además, tenemos motivos (¿sobrados?) para sospechar lo pésimo. No tenemos una priori sobre la probabilidad de que el muestreo esté correctamente realizado, pero la posteriori, a la vista de los datos, es necesariamente minúscula.</p>
<p>¿Y en términos del tamaño del efecto? Parece que es pequeño. A ojo, muchos lo habrían dado por bueno: 32.75% vs 31.85%. Pero también podría temerse que, una vez <em>demostrado</em> el error en el procedimiento de muestreo, en otras particiones usando el mismo código, pudiera ocurrir <em>cualquier cosa</em>.</p>
<p>¿Y la decisión final? Pues sospecho que por motivos ajenos a los <em>data driven</em> antes citados, acabemos dando por buena —aunque con reservas— a lo que nos han pasado. Tal es la vida del consultor.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/p-valor/" rel="tag">p-valor</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/prueba-de-hip%C3%B3tesis/" rel="tag">prueba de hipótesis</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/r/" rel="tag">r</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/remuestreo/" rel="tag">remuestreo</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2019/12/03/la-poblacion-envejece-pero-envejecen-tambien-los-grupos-de-edad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">La población envejece pero, ¿envejecen también los grupos de edad?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2019/12/05/ser-cientifico-de-datos-puede-ser-menos-sexi-de-lo-que-te-han-contado/" rel="next">
			<span class="pager__subtitle">Siguiente&thinsp;»</span>
			<p class="pager__title">Ser científico de datos, ¿puede ser menos sexi de lo que te han contado?</p>
		</a>
	</div>
</nav>


			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Más Recientes</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-exceso-mortalidad-noviembre-2021/">Sobre el exceso de mortalidad en noviembre de 2021</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/09/mas-sobre-la-estimacion-de-probabilidades-de-eventos-que-no-se-repiten/">Más sobre la estimación de probabilidades de eventos que no se repiten</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/07/estadistica-vs-siquiatria-la-aparente-contradiccion-la-profunda-sintesis/">Estadística vs siquiatría: la aparente contradicción, la profunda síntesis</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/12/02/por-que-cabe-argumentar-que-estos-resultados-infraestiman-la-efectividad-de-las-vacunas-contra-el-covid/">¿Por qué cabe argumentar que estos resultados infraestiman la efectividad de las vacunas contra el covid?</a></li>
			<li class="widget__item"><a class="widget__link" href="/2021/11/25/un-episodio-relevante-para-estas-paginas-extraido-de-un-espia-perfecto/">Un episodio relevante para estas páginas extraído de &#34;Un espía perfecto&#34;</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 datanalytics.
      
		</div>
	</div>
</footer>

	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"], ["$latex", "$"],["\\(","\\)"]]} })
</script>

</body>
</html>